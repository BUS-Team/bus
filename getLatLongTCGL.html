<html>
<head>
	<title>getLatLng</title>
	<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.10.1/jquery.min.js"></script>
	<script type="text/javascript">
		/* Variáveis */

		/* 
		   Armazena o response da chamada da função BuscaLatLong que 
		   recupera a posição do veículo no instante em que a função foi chamada
	     */
		var arrayLatLong;

		/* Fim das declarações de variáveis */



		$.fn.Busca = function BuscaLatLong(idLinha) {
	        $['ajax']({
	            type: 'POST',
	            url: 'http://site.tcgrandelondrina.com.br:8082/soap/buscamapa',
	            timeout: 30000,
	            beforeSend: function( xhr ) {
				     xhr.overrideMimeType( 'text/plain; charset=UTF-8' );
				},
	            success: function (_0x4004x35) {
	                arrayLatLong = _0x4004x35.split('&');
	            },
	            complete: function (_0x4004x35, _0x4004x36) {
	                if (_0x4004x36 == 'timeout') {
	                    jAlert('Desculpe. Tempo esgotado, sua conex\xE3o parece estar lenta. Feche e tente novamente !', 'Desculpe!');

	                };
	            },
	            data: {
	                idLinha: "" + idLinha + ""
	            }
	        });
		};

		$.fn.Busca(200);


	/* 
		#TODO: Manipular esta função abaixo para pegar um array com o idLinhas de todas as linhas de ônibus.

		$.fn.BuscarPontos = function (idLinha, idDia) {
	        $("#idLinhaO option").remove();
	        $("#idLinhaD option").remove();
	        $.ajax({ type: 'POST', url: '/Soap/BuscarPontos', timeout: 30000,
	            beforeSend: function () {
	                $('#idLinhaO').empty();
	                $('#idLinhaD').empty();
	                // $('#idLinhaOC').html('Aguarde...');
	                // $('#idLinhaDC').html('Aguarde...');
	            },
	            success: function (data) {
	                var select = $('#idLinhaO').empty();

	                // Limpa o "combo" de cidades
	                var html_comboO = '<div id="div_idLinhaO" class="rowElem"><select id="idLinhaO" name="idLinhaO" style="z-index: 50 !important;"></div>';
	                $("#idLinhaOcontainer").html(html_comboO);

	                //console.log(data[0].cod.length);

	                if (data[0].cod.length == 0) {
	                    $('#idLinhaO').append('<option value="">N&atilde;o dispon&iacute;vel</option>');
	                    jAlert('Hor&aacute;rio n&atilde;o dispon&iacutevel!', 'Desculpe');
	                } else {
	                    for (var i = 0; i < data[0].cod.length; i++) {
	                        //console.log('Origem: ## ' + data[0].valor[i]);
	                        $('#idLinhaO').append('<option value="' + data[0].cod[i] + '">' + data[0].valor[i] + '</option>');
	                    }
	                }
	                // $('#idLinhaOC').html('Selecione...');
	                var select = $('#idLinhaD').empty();
	                $("#idLinhaO").jqTransSelect();

	                // Limpa o "combo" de cidades
	                var html_comboD = '<div id="div_idLinhaD" class="rowElem"><select id="idLinhaD" name="idLinhaD" style="z-index: 50 !important;"></div>';
	                $("#idLinhaDcontainer").html(html_comboD);
	                // Faz o parser no json e cria os elementos

	                //console.log('Destino: ## ' + data[0].cod.length);

	                if (data[0].cod.length == 0) {
	                    $('#idLinhaD').append('<option value="">N&atilde;o dispon&iacute;vel</option>');
	                } else {
	                    for (var i = 0; i < data[0].cod.length; i++) {
	                        //console.log('Destino: ## ' + data[0].valor[i]);
	                        $('#idLinhaD').append('<option value="' + data[0].cod[i] + '">' + data[0].valor[i] + '</option>');
	                    }
	                }
	                // Chama novamente o jqTransform para o select. Funciona como um refresh no layout
	                $("#idLinhaD").jqTransSelect();

	                // $('#idLinhaDC').html('Selecione...');
	            },
	            error: function (data) {
	                $('#idLinhaO').empty();
	                $('#idLinhaD').empty();
	                // $('#idLinhaOC').html('Erro...');
	                // $('#idLinhaDC').html('Erro...');
	                //alert('Desculpe ! Erro no servidor, feche o navegador e tente novamente.');
	                jAlert('Erro no servidor, feche o navegador e tente novamente.!', 'Desculpe');
	            },
	            complete: function (data, status) {
	                if (status == 'timeout') {
	                    $('#idLinhaO').empty();
	                    $('#idLinhaD').empty();
	                    //    $('#idLinhaOC').html('Erro...');
	                    //    $('#idLinhaDC').html('Erro...');
	                    //alert('Desculpe! Tempo esgotado, sua conex�o parece estar lenta. Feche e tente novamente !');
	                    jAlert('Tempo esgotado, sua conex�o parece estar lenta. Feche e tente novamente!', 'Desculpe');
	                }
	            },
	            data: { pLinha: "" + idLinha + "", pDia: "" + idDia + "" },
	            dataType: 'json'
	        });
	    }
    */



	</script>
</head>
<body>

</body>
</html>